---
title: "없어진 기록 찾기"
description: >-
    JOIN
author: jutory
date: YYYY-MM-DD HH:MM:SS +09:00
categories: [SQL Coding Test, Programmers]
tags: [SQL]
---

## **문제**

다음은 동물 보호소의 입소 및 출소 기록을 담은 `ANIMAL_INS`와 `ANIMAL_OUTS` 테이블입니다.

> #### _ANIMAL_INS 테이블_

| Column name       | Type         | Nullable | Description                     |
|-------------------|--------------|----------|---------------------------------|
| ANIMAL_ID         | VARCHAR(N)   | FALSE    | 동물의 아이디                  |
| ANIMAL_TYPE       | VARCHAR(N)   | FALSE    | 동물의 종류                    |
| DATETIME          | DATETIME     | FALSE    | 보호소에 들어온 날짜 및 시간   |
| INTAKE_CONDITION  | VARCHAR(N)   | FALSE    | 보호 당시 동물의 상태          |
| NAME              | VARCHAR(N)   | TRUE     | 동물의 이름                    |
| SEX_UPON_INTAKE   | VARCHAR(N)   | FALSE    | 보호 당시 동물의 성별 및 중성화 여부 |

> #### _ANIMAL_OUTS 테이블_

| Column name       | Type         | Nullable | Description                     |
|-------------------|--------------|----------|---------------------------------|
| ANIMAL_ID         | VARCHAR(N)   | FALSE    | 동물의 아이디                  |
| ANIMAL_TYPE       | VARCHAR(N)   | FALSE    | 동물의 종류                    |
| DATETIME          | DATETIME     | FALSE    | 보호소에서 입양된 날짜 및 시간 |
| NAME              | VARCHAR(N)   | TRUE     | 동물의 이름                    |
| SEX_UPON_OUTCOME  | VARCHAR(N)   | FALSE    | 입양 당시 동물의 성별 및 중성화 여부 |

<br>

---

## **문제 정의**

> `ANIMAL_INS`와 `ANIMAL_OUTS` 테이블에서 아래 조건을 만족하는 데이터를 조회하는 SQL문을 작성하세요:
> 1. 입양 기록(`ANIMAL_OUTS`)은 존재하지만, 보호소 입소 기록(`ANIMAL_INS`)이 없는 동물
> 2. 동물의 ID(`ANIMAL_ID`)와 이름(`NAME`)을 출력
> 
> 출력 컬럼:
> - 동물 ID (`ANIMAL_ID`)
> - 동물 이름 (`NAME`)
> 
> 결과 정렬 기준:
> 1. 동물 ID를 기준으로 오름차순 정렬
> 
> 주의사항:  
> `NAME`은 NULL일 수 있습니다.  
{: .prompt-info }

<br>

---

## **정답**

```sql
SELECT 
    AO.ANIMAL_ID, 
    AO.NAME
FROM 
    ANIMAL_OUTS AO
LEFT JOIN 
    ANIMAL_INS AI
ON 
    AO.ANIMAL_ID = AI.ANIMAL_ID
WHERE 
    AI.ANIMAL_ID IS NULL
ORDER BY 
    AO.ANIMAL_ID ASC;  
```

<br>
- - -
## **Tip**

> 1. **리뷰를 가장 많이 작성한 회원을 식별합니다.**  
>    - **`COUNT(*)`**로 각 회원별 리뷰 개수를 계산합니다.  
>    - `GROUP BY MEMBER_ID`를 사용해 회원별로 그룹화하고, 리뷰 개수가 가장 많은 회원을 식별합니다.  
>    - `ORDER BY COUNT(*) DESC FETCH FIRST 1 ROWS ONLY`로 가장 많은 리뷰를 작성한 회원을 선택합니다.  
>
> 2. **해당 회원의 리뷰를 조회합니다.**  
>    - `MEMBER_PROFILE`와 `REST_REVIEW` 테이블을 **`MEMBER_ID`**를 기준으로 JOIN합니다.  
>    - JOIN을 통해 회원 이름(`MEMBER_NAME`)과 리뷰 데이터를 결합하여 가져옵니다.  
>
> 43. **리뷰 작성일 형식을 포맷합니다.**  
>    - **`TO_CHAR(RR.REVIEW_DATE, 'YYYY-MM-DD')`**를 사용하여 `REVIEW_DATE`를 **`YYYY-MM-DD`** 형식으로 출력합니다.  
{: .prompt-tip }
> SQL Dialect Used: Oracle

<br>
- - -
## **Useful link**

[없어진 기록 찾기"](https://school.programmers.co.kr/learn/courses/30/lessons/59042)