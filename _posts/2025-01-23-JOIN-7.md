---
title: "있었는데요 없었습니다"
description: >-
    JOIN
author: jutory
date: YYYY-MM-DD HH:MM:SS +09:00
categories: [SQL Coding Test, Programmers]
tags: [SQL]
---

<br>
## **문제 설명**

다음은 동물 보호소에서 관리하는 동물 입소 및 입양 정보를 담은 **ANIMAL_INS 테이블**과 **ANIMAL_OUTS 테이블**입니다.

<br>
> #### **_ANIMAL_INS 테이블_**

| Column name       | Type       | Nullable | Description            |
|-------------------|------------|----------|------------------------|
| ANIMAL_ID         | VARCHAR(N) | FALSE    | 동물 ID                |
| ANIMAL_TYPE       | VARCHAR(N) | FALSE    | 생물 종                |
| DATETIME          | DATETIME   | FALSE    | 보호 시작일            |
| INTAKE_CONDITION  | VARCHAR(N) | FALSE    | 보호 시작 시 상태      |
| NAME              | VARCHAR(N) | TRUE     | 이름                   |
| SEX_UPON_INTAKE   | VARCHAR(N) | FALSE    | 성별 및 중성화 여부    |

<br>
> #### **_ANIMAL_OUTS 테이블_**

| Column name       | Type       | Nullable | Description            |
|-------------------|------------|----------|------------------------|
| ANIMAL_ID         | VARCHAR(N) | FALSE    | 동물 ID                |
| ANIMAL_TYPE       | VARCHAR(N) | FALSE    | 생물 종                |
| DATETIME          | DATETIME   | FALSE    | 입양일                |
| NAME              | VARCHAR(N) | TRUE     | 이름                   |
| SEX_UPON_OUTCOME  | VARCHAR(N) | FALSE    | 성별 및 중성화 여부    |

ANIMAL_OUTS 테이블의 ANIMAL_ID는 ANIMAL_INS의 ANIMAL_ID의 외래 키입니다.

<br>
- - -
## **문제**

> 관리자의 실수로 일부 동물의 입양일이 잘못 입력되었습니다. 보호 시작일보다 입양일이 더 빠른 동물의 아이디와 이름을 조회하는 SQL문을 작성해주세요. 이때 결과는 보호 시작일이 빠른 순으로 조회해야합니다.
{: .prompt-info }

<br>
- - -
<br>
<details>
  <summary style="font-size: 1.5em; font-weight: bold;">풀이 과정</summary>
<div markdown="1">
1. **조건 확인**  
   - 보호 시작일(`DATETIME`)보다 입양일(`DATETIME`)이 더 빠른 동물 찾기

2. **테이블 결합 (JOIN)**
   - **INNSER JOIN** 선택 이유 : 입양 데이터가 있는 `MEMBER_ID`의 데이터만 필요하기 때문

3. **결과 정렬**
   - 정렬 기준에 따라 **ORDER BY**로 결과 정렬
       - 보호 시작일(`ANIMAL_INS.DATETIME`)을 기준으로 오름차순 정렬

4. **최종 결과 출력**  
   - SELECT 절에서  `ANIMAL_ID`, `NAME` 컬럼 선택
</div>
</details>

<br>
- - -
<br>
## **정답**

```sql
SELECT 
    AI.ANIMAL_ID, 
    AI.NAME
FROM 
    ANIMAL_INS AI
JOIN 
    ANIMAL_OUTS AO
ON 
    AI.ANIMAL_ID = AO.ANIMAL_ID
WHERE 
    AO.DATETIME < AI.DATETIME
ORDER BY 
    AI.DATETIME ASC;  
```

- - -
<br>
## **Tip**
> 1. **입양일이 보호 시작일보다 빠른 데이터를 필터링**  
>    - **WHERE `AO.DATETIME` < `AI.DATETIME`**: 입양일(`AO.DATETIME`)이 보호 시작일(`AI.DATETIME`)보다 이른 경우를 선택
>        - 입양일(ANIMAL_OUTS.DATETIME)이 보호 시작일(ANIMAL_INS.DATETIME)보다 "더 빠른" 경우를 찾는 것이므로, '>' 조건이 적합 <br> 만약 >=(이상) 조건을 사용하면, 입양일과 보호 시작일이 같은 경우도 결과에 포함되므로 이는 문제의 요구사항과 맞지 않음
>
> 2. **NULL 값 처리에 유의**  
>    - `NAME` 컬럼이 NULL일 수 있으므로 결과를 확인할 때 NULL 값 처리 여부를 점검해야 한다.
        - But, 문제에서 요구한 컬럼은 `ANIMAL_ID`와 `NAME`이므로, NAME 컬럼에 NULL 값이 있더라도 문제의 결과 출력에는 문제가 없음
{: .prompt-tip }
> SQL Dialect Used: Oracle

<br>
- - -
<br>
## **개념 확인**
> - **INNER JOIN**
>    - 두 테이블의 공통된 값을 기준으로 데이터를 연결

<br>
- - -
<br>
## **Useful link**

[있었는데요 없었습니다](https://school.programmers.co.kr/learn/courses/30/lessons/59043)